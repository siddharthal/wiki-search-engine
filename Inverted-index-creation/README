Code tested in Python2.
Python file should be run as:

python2 main.py <input-wiki> <output-wiki-file>

or running the script:

bash index.py <input-wiki> <output-wiki-file>

Format of the index created:
<token1> <document1|title-count|body-count|-->  <document2|title-count|body-count|-->  ......
<token2> ...
.
.
.

<token_last> ..... 

You may download the XML wiki dump from here:
https://dumps.wikimedia.org/